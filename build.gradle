plugins {
    id 'kotlin-multiplatform' version '1.3.50' apply false
    id "org.jetbrains.kotlin.jvm" version "1.3.50" apply false
    id 'org.jetbrains.gradle.plugin.idea-ext' version '0.5' apply false
    // executing node scripts (adds support for Yarn. Also - NPM, Grunt and Gulp)
    id 'com.moowork.node' version '1.3.1' apply false
}


allprojects {
//    println "--- project ---: $project.name $project.depth ${if(project.depth > 0) project.parent.rootDir else ''}"
//    println "--- project ---: $project.name $project.rootDir"
}

task printProps {
    doLast {
        println System.env.PYTHON_INCLUDE
    }
}

def publishedProjects = [
        'base-portable',
        'base',
        'mapper-core',
        'visualization-base-canvas',
        'visualization-base-svg',
        'visualization-base-svg-mapper',
        'visualization-base-svg-mapper-jfx',
        'visualization-plot-base-portable',
        'visualization-plot-base',
        'visualization-plot-common-portable',
        'visualization-plot-common',
        'visualization-plot-builder-portable',
        'visualization-plot-builder',
        'plot-config-portable',
        'plot-config',
        'visualization-demo-common',
        'visualization-demo-common-jfx',
        'jvm-jfx-package',
]

subprojects {
    group 'org.jetbrains.datalore-plot'
    version = "1.0-SNAPSHOT"

    repositories {
        mavenCentral()
        jcenter()
    }

    tasks.all {
        if (name in ['compileKotlinJvm', 'compileTestKotlinJvm']) {
            kotlinOptions.jvmTarget = "1.8"

        }
//        if (name == 'compileKotlinJs') {
//        }
    }

    if (name in publishedProjects) {
        apply plugin: 'maven-publish'
        publishing {
            repositories {
                maven {
                    url = uri("$rootDir/.maven-publish-dev-repo")
                }
            }
        }
    }
}
