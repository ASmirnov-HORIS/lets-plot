plugins {
    id 'kotlin-multiplatform'
}

if (project.properties['python_include_path'] != null) {
    if (project.properties['python_bin'] != null) {
        task installPythonPackage(type:Exec) {
            workingDir project.projectDir

            commandLine project.properties['python_bin'], 'setup.py', 'install'
        }

        installPythonPackage.dependsOn(':python-extension:build')

        build.dependsOn(installPythonPackage)
    } else {
        println("------------------------------------------------------------------------------------------------")
        println("Python package build unavailable. Please set \"python_bin\" property in gradle.properties file.")
        println("------------------------------------------------------------------------------------------------")
    }

} else {
    println("------------------------------------------------------------------------------------------------")
    println("Python package build unavailable. Please set \"python_include_path\" property in gradle.properties file.")
    println("------------------------------------------------------------------------------------------------")
}
