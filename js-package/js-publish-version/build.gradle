/*
 * Copyright (c) 2019. JetBrains s.r.o.
 * Use of this source code is governed by the MIT license that can be found in the LICENSE file.
 */

plugins {
    // publishing to bintray
    id "com.jfrog.bintray"
}

def artifact_version = project.buildSettings.js_artifact_version
def bintray_user = project.buildSettings?.bintray?.user
def bintray_key = project.buildSettings?.bintray?.key

if (bintray_user != null && bintray_key != null) {
    bintray {
        user = bintray_user
        key = bintray_key

        filesSpec {
            from('../build/dist') {
                include "*$artifact_version*"
            }
            into '.'
        }

        publish = true
        override = false

        pkg {
            repo = 'datalore-plot'
            name = 'datalore-plot-js'
            userOrg = 'JetBrains'
            licenses = ['MIT']
            vcsUrl = 'https://github.com/JetBrains/datalore-plot'
            version {
                name = artifact_version
            }
        }
    }
}